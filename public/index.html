<!DOCTYPE html>
<html>
<head>
	<title>Partjson</title>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
	<link rel="stylesheet" href="./css/normalize.css">
	<link rel="stylesheet" href="./css/partjson.css">
	<style>
	</style>
	<script src="./dist/partjson.umd.js" charset="utf-8"></script>
</head>
<body>

<div class='nav-top'>
	<div class="nav-banner">
		<div style="float:left; padding: 0 12px;">
			<a class="nodecor" href="./">Partjson</a>
		</div>
		<div class='nav-page-wrapper'>
			<a href='./' class="nav-page">Home</a>
			<a href='syntax.html' class="nav-page">Syntax</a>
			<a href='reserved.html' class="nav-page">Reserved</a>
		</div>
	</div>
	<nav class="nav-bar" 
		onmouseleave="collapseSymbols()">
		<div style="width: 100%; min-height: 16px; white-space: nowrap;">
			<!--<div class="nav-col" id="nav-col-skip">
				<div class="nav-tab" > Syntax </div>
			</div>
			<div class="nav-col" id="nav-col-time">
				<div class="nav-tab"> Reserved </div>
			</div>-->
		</div>
	</nav>
</div>
<content>
	<section id='intro'>
		<h3 class='section-title'>Basics</h3>
		<p>
			Partjson is a data shaping syntax and utility. It fills 
			a JSON-based template to match the intended structure 
			of data collections and aggregated results. 
    </p>

    <h3 class='section-title'>Usage</h3>
    <p>
      <pre class="inputtext" style="width: 90%; margin:auto">
    	
      <span class="code-comment">// from your project directory</span>
      $ npm install git+ssh://git@cmpb-devops.stjude.org:5002/esioson/partjson.git

      <span class="code-comment">// in code file</span>
      import Partjson from "partjson"

      const Pj = new Partjson({
        template: {...}
        <span class="code-comment">// data is optional at instantiation, 
        // but will trigger processing if provided</span>
        data: [{...}, ...],
        "=": {
          <span class="code-comment">// external functions and properties</span>
        }
      })

      <span class="code-comment">// append to processed data</span>
      Pj.add({
        data: [
          {...}, 
          ...
        ]
      })

      <span class="code-comment">// re-parse template, clear processed data</span>
      Pj.refresh({
        template: {...} <span class="code-comment">// optional if replacing</span>
        data: {...}  <span class="code-comment">// optional if replacing</span>
      })
      </pre>
    </p>
    <br/>
    <p>
    	More details are described in the <a href="syntax.html">Syntax</a>
      and <a href="reserved.html">Reserved Terms</a> pages.
    </p>
	</section>

	<section id='repository'>
		<h3 class='section-title'>Source Code</h3>
		<p><a href="http://cmpb-devops.stjude.org/gitlab/esioson/partjson" target="new">
			http://cmpb-devops.stjude.org/gitlab/esioson/partjson</a>
		</p>
		<br/>
	</section>

	<!--
	<section id='license'>
		<h3 class='section-title'>License</h3>
		<p>Provided under the opensource 
			<a href="https://opensource.org/licenses/MIT">MIT license.</a>
		</p>
		<br/>
	</section>
	-->

	<section id='quick-examples'>
		<h3 class='section-title'>Quick Examples</h3>
		<!--<p>Click the <button class='try-btn' style='position:relative'>try</button> button in 
		the upper right corner of the examples below.</p>-->
		<br/>
	</section>
</content>
<script src="./js/demo.js"></script>
<script>
demo([{
	section: "quick-examples",
	id: "group-by-data-value",
	title: "Group by data value",
	template: {
		byCat: {
    	"$catname": {
    	  count: "+1"
   		}
  	}
  }
},{
	section: "quick-examples",
	id: "list-by-value",
	title: "List by data value",
	template: {
		distinctPreyType: [
    	"$preytype", "distinct"
    ],
    nonDistinct: [
    	"$preytype"
    ]
  }
},{
	section: "quick-examples",
	id: "min-max-values",
	title: "Find the minimum and maximum values",
	template: {
    massMin: ">$preymass",
		massMax: "<$preymass",
    count: "+1"
  }
},{
	section: "quick-examples",
	id: "map-by-value",
	title: "Map by data value",
	template: {
		mapType: [
    	["$preytype", {total:"+1"}], "map"
    ]
  }
},{
	section: "quick-examples",
	id: "filter-by-value",
	title: "Filter by data value",
	template: {
		"@ignore()": {
			"$preymass": "=ignoreTinyMass()",
			"$preytype": ["mammal"],
		},
  	"okPreyType": [
  		"$preytype", "distinct"
  	],
  	"overrideParentFilter": {
  		"@ignore()": ["fish","bird"],
  		"okPreyType": [
	  		"$preytype", "distinct"
	  	]
  	},
  	"minimumMass": ">$preymass"
  }
}], true);
</script>
</body>
</html>

